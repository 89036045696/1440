<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>S.F.T. XMODEM Library: XModem Internal</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">S.F.T. XMODEM Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__xmodem__internal.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">XModem Internal</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__XMODEM__BUF__.html">_XMODEM_BUF_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure defining an XMODEM CHECKSUM packet.  <a href="struct__XMODEM__BUF__.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__XMODEMC__BUF__.html">_XMODEMC_BUF_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure defining an XMODEM CRC packet.  <a href="struct__XMODEMC__BUF__.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__XMODEM__.html">_XMODEM_</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that identifies the XMODEM communication state.  <a href="struct__XMODEM__.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__XMODEM__BUF__.html">_XMODEM_BUF_</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6">XMODEM_BUF</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure defining an XMODEM CHECKSUM packet.  <a href="#gaf865e242542aa82fda9745aa9ce716b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__XMODEMC__BUF__.html">_XMODEMC_BUF_</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21">XMODEMC_BUF</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure defining an XMODEM CRC packet.  <a href="#ga3a5d2704f8543319b57cb00893f80c21"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__XMODEM__.html">_XMODEM_</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that identifies the XMODEM communication state.  <a href="#ga194fbf91fe7e847dc6aa8b2d78b93341"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga3f42781b244a5cacaabfde8559570909">CalcCheckSum</a> (const char *lpBuf, short cbBuf)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate checksum for XMODEM packet.  <a href="#ga3f42781b244a5cacaabfde8559570909"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gaa879f553c24787a6bb5627ca3a15cdaa">my_htons</a> (unsigned short sVal)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate checksum for XMODEM packet.  <a href="#gaa879f553c24787a6bb5627ca3a15cdaa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gabbfc5e3f26950e0db9d2cc8fd3ac4529">CalcCRC</a> (const char *lpBuf, short cbBuf)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate 16-bit CRC for XMODEM packet.  <a href="#gabbfc5e3f26950e0db9d2cc8fd3ac4529"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga6bf0060dd155994fcfc657bbf8336fdb">MyMillis</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return internal 'milliseconds' value for timing purposes.  <a href="#ga6bf0060dd155994fcfc657bbf8336fdb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gaaf30bff0d1069d88c1bbaea3fe9748b5">GenerateSEQ</a> (<a class="el" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6">XMODEM_BUF</a> *pBuf, unsigned char bSeq)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a sequence number pair, place into XMODEM_BUF.  <a href="#gaaf30bff0d1069d88c1bbaea3fe9748b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga390dbcf4f7acce4593632f6789eee75e">GenerateSEQC</a> (<a class="el" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21">XMODEMC_BUF</a> *pBuf, unsigned char bSeq)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a sequence number pair, place into XMODEMC_BUF (the CRC version)  <a href="#ga390dbcf4f7acce4593632f6789eee75e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gadcf2538e319130745b37d1ba9d7f0875">GetXmodemBlock</a> (SERIAL_TYPE ser, char *pBuf, short cbSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an XMODEM block from the serial device.  <a href="#gadcf2538e319130745b37d1ba9d7f0875"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga8dc519acd5fb00fcf44be051cc7fbcc2">WriteXmodemChar</a> (SERIAL_TYPE ser, unsigned char bVal)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single character to the serial device.  <a href="#ga8dc519acd5fb00fcf44be051cc7fbcc2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gac8bab540d9e07295a920b4b8bc9784ab">WriteXmodemBlock</a> (SERIAL_TYPE ser, const void *pBuf, int cbSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an XMODEM block via the serial device.  <a href="#gac8bab540d9e07295a920b4b8bc9784ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gaebc2f5705f07625e4608eab408063c82">XModemFlushInput</a> (SERIAL_TYPE ser)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read all input from the serial port until there is 1 second of 'silence'.  <a href="#gaebc2f5705f07625e4608eab408063c82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga8ed473aba0a89962bbb266986fc68b26">XmodemTerminate</a> (<a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *pX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate the XMODEM connection.  <a href="#ga8ed473aba0a89962bbb266986fc68b26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga52f24e88150bb39aa22f4d51686e818d">ValidateSEQ</a> (<a class="el" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6">XMODEM_BUF</a> *pX, unsigned char bSeq)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the sequence number of a received XMODEM block.  <a href="#ga52f24e88150bb39aa22f4d51686e818d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gad8accfe76d5f9e74085c9d0139a720b8">ValidateSEQC</a> (<a class="el" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21">XMODEMC_BUF</a> *pX, unsigned char bSeq)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate the sequence number of a received XMODEM block (CRC version)  <a href="#gad8accfe76d5f9e74085c9d0139a720b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga976e438c89c521a87410a249a822164a">ReceiveXmodem</a> (<a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *pX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function to receive a file via XMODEM (CRC or Checksum)  <a href="#ga976e438c89c521a87410a249a822164a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga093eeee14b9f78b2bbc6b6fa1c1fd1dd">SendXmodem</a> (<a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *pX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic function to send a file via XMODEM (CRC or Checksum)  <a href="#ga093eeee14b9f78b2bbc6b6fa1c1fd1dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#gad969e8b31a9388fd2b0c96c7c5d33923">XReceiveSub</a> (<a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *pX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calling function for ReceiveXmodem.  <a href="#gad969e8b31a9388fd2b0c96c7c5d33923"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem__internal.html#ga853105eb0f3d573cd53ee68b1bbe3f41">XSendSub</a> (<a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *pX)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calling function for SendXmodem.  <a href="#ga853105eb0f3d573cd53ee68b1bbe3f41"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>internal support functions </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga194fbf91fe7e847dc6aa8b2d78b93341"></a><!-- doxytag: member="xmodem.c::XMODEM" ref="ga194fbf91fe7e847dc6aa8b2d78b93341" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__XMODEM__.html">_XMODEM_</a>  <a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Structure that identifies the XMODEM communication state. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__XMODEM__.html" title="Structure that identifies the XMODEM communication state.">_XMODEM_</a>
{
  SERIAL_TYPE <a class="code" href="struct__XMODEM__.html#a7248b983e79bd09ec9121f2d2d90b546" title="identifies the serial connection, data type is OS-dependent">ser</a>;     <span class="comment">// identifies the serial connection, data type is OS-dependent</span>
  FILE_TYPE <a class="code" href="struct__XMODEM__.html#ad5a5bcd8c94605463f6424f5e5bb03c4" title="identifies the file handle, data type is OS-dependent">file</a>;      <span class="comment">// identifies the file handle, data type is OS-dependent</span>

  <span class="keyword">union</span>
  {
    <a class="code" href="struct__XMODEM__BUF__.html" title="Structure defining an XMODEM CHECKSUM packet.">XMODEM_BUF</a> <a class="code" href="struct__XMODEM__.html#a5a257c0d0de04195f73476d29fbc2f68" title="XMODEM CHECKSUM buffer.">xbuf</a>;   <span class="comment">// XMODEM CHECKSUM buffer</span>
    <a class="code" href="struct__XMODEMC__BUF__.html" title="Structure defining an XMODEM CRC packet.">XMODEMC_BUF</a> <a class="code" href="struct__XMODEM__.html#ab144169d1c41c7ff39d526b2209c4ff4" title="XMODEM CRC buffer.">xcbuf</a>; <span class="comment">// XMODEM CRC buffer</span>
  } <a class="code" href="struct__XMODEM__.html#a0f8b7bec7bb4c64fa5599b23ce0decf9" title="union of both buffers, total length 133 bytes">buf</a>;               <span class="comment">// union of both buffers, total length 133 bytes</span>

  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct__XMODEM__.html#a6c6e3069c4fc35ee125429e18081640e" title="non-zero for CRC, zero for checksum">bCRC</a>;  <span class="comment">// non-zero for CRC, zero for checksum</span>

} <a class="code" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341" title="Structure that identifies the XMODEM communication state.">XMODEM</a>;
</pre></div> 
</div>
</div>
<a class="anchor" id="gaf865e242542aa82fda9745aa9ce716b6"></a><!-- doxytag: member="xmodem.c::XMODEM_BUF" ref="gaf865e242542aa82fda9745aa9ce716b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__XMODEM__BUF__.html">_XMODEM_BUF_</a> <a class="el" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6">XMODEM_BUF</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Structure defining an XMODEM CHECKSUM packet. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__XMODEM__BUF__.html" title="Structure defining an XMODEM CHECKSUM packet.">_XMODEM_BUF_</a>
{
   <span class="keywordtype">char</span> <a class="code" href="struct__XMODEM__BUF__.html#ad473a2f2480e1e119dfbb7776b6e1c75" title="SOH byte goes here.">cSOH</a>;                   <span class="comment">// ** SOH byte goes here             **</span>
   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> aSEQ, <a class="code" href="struct__XMODEM__BUF__.html#aae158ef033cf2e3c569185c6ab6cba26" title="1st byte = seq#, 2nd is ~seq#">aNotSEQ</a>; <span class="comment">// ** 1st byte = seq#, 2nd is ~seq#  **</span>
   <span class="keywordtype">char</span> <a class="code" href="struct__XMODEM__BUF__.html#a0361c7c8bf7e22539fa1e819b4b3e199" title="the actual data itself!">aDataBuf</a>[128];          <span class="comment">// ** the actual data itself!        **</span>
   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="struct__XMODEM__BUF__.html#ad978c87c418aaf08801a510031b7bf77" title="checksum gets 1 byte">bCheckSum</a>;     <span class="comment">// ** checksum gets 1 byte           **</span>
} PACKED <a class="code" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6" title="Structure defining an XMODEM CHECKSUM packet.">XMODEM_BUF</a>;
</pre></div> 
</div>
</div>
<a class="anchor" id="ga3a5d2704f8543319b57cb00893f80c21"></a><!-- doxytag: member="xmodem.c::XMODEMC_BUF" ref="ga3a5d2704f8543319b57cb00893f80c21" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__XMODEMC__BUF__.html">_XMODEMC_BUF_</a> <a class="el" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21">XMODEMC_BUF</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Structure defining an XMODEM CRC packet. </p>
<div class="fragment"><pre class="fragment"><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__XMODEMC__BUF__.html" title="Structure defining an XMODEM CRC packet.">_XMODEMC_BUF_</a>
{
   <span class="keywordtype">char</span> <a class="code" href="struct__XMODEMC__BUF__.html#ad473a2f2480e1e119dfbb7776b6e1c75" title="SOH byte goes here.">cSOH</a>;                   <span class="comment">// ** SOH byte goes here             **</span>
   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> aSEQ, <a class="code" href="struct__XMODEMC__BUF__.html#aae158ef033cf2e3c569185c6ab6cba26" title="1st byte = seq#, 2nd is ~seq#">aNotSEQ</a>; <span class="comment">// ** 1st byte = seq#, 2nd is ~seq#  **</span>
   <span class="keywordtype">char</span> <a class="code" href="struct__XMODEMC__BUF__.html#a0361c7c8bf7e22539fa1e819b4b3e199" title="the actual data itself!">aDataBuf</a>[128];          <span class="comment">// ** the actual data itself!        **</span>
   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="struct__XMODEMC__BUF__.html#ad6b30773ca1f3fb9eed169b23263b63b" title="CRC gets 2 bytes, high endian.">wCRC</a>;         <span class="comment">// ** CRC gets 2 bytes, high endian  **</span>
} PACKED <a class="code" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21" title="Structure defining an XMODEM CRC packet.">XMODEMC_BUF</a>;
</pre></div> 
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga3f42781b244a5cacaabfde8559570909"></a><!-- doxytag: member="xmodem.c::CalcCheckSum" ref="ga3f42781b244a5cacaabfde8559570909" args="(const char *lpBuf, short cbBuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="group__xmodem__internal.html#ga3f42781b244a5cacaabfde8559570909">CalcCheckSum</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lpBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>cbBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate checksum for XMODEM packet. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">lpBuf</td><td>A pointer to the XMODEM data buffer </td></tr>
    <tr><td class="paramname">cbBuf</td><td>The length of the XMODEM data buffer (typically 128) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An unsigned char value to be assigned to the 'checksum' element in the XMODEM packet </dd></dl>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00236">236</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gabbfc5e3f26950e0db9d2cc8fd3ac4529"></a><!-- doxytag: member="xmodem.c::CalcCRC" ref="gabbfc5e3f26950e0db9d2cc8fd3ac4529" args="(const char *lpBuf, short cbBuf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned short <a class="el" href="group__xmodem__internal.html#gabbfc5e3f26950e0db9d2cc8fd3ac4529">CalcCRC</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lpBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>cbBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate 16-bit CRC for XMODEM packet. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">lpBuf</td><td>A pointer to the XMODEM data buffer </td></tr>
    <tr><td class="paramname">cbBuf</td><td>The length of the XMODEM data buffer (typically 128) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A high-endian 16-bit (unsigned short) value to be assigned to the 'CRC' element in the XMODEM packet</dd></dl>
<p>This method uses the 'long way' which is SMALLER CODE for microcontrollers, but eats up a bit more CPU. Otherwise, you'd have to pre-build the 256 byte table and use "the table lookup" method. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00296">296</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaaf30bff0d1069d88c1bbaea3fe9748b5"></a><!-- doxytag: member="xmodem.c::GenerateSEQ" ref="gaaf30bff0d1069d88c1bbaea3fe9748b5" args="(XMODEM_BUF *pBuf, unsigned char bSeq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__xmodem__internal.html#gaaf30bff0d1069d88c1bbaea3fe9748b5">GenerateSEQ</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6">XMODEM_BUF</a> *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>bSeq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate a sequence number pair, place into XMODEM_BUF. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuf</td><td>A pointer to an XMODEM_BUF structure </td></tr>
    <tr><td class="paramname">bSeq</td><td>An unsigned char, typically cast from an unsigned long 'block number'</td></tr>
  </table>
  </dd>
</dl>
<p>This function generates the sequence pair for the XMODEM packet. The 'block number' is initially assigned a value of '1', and increases by 1 for each successful packet. That value is 'truncated' to a single byte and assigned as a sequence number for the packet itself. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00394">394</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga390dbcf4f7acce4593632f6789eee75e"></a><!-- doxytag: member="xmodem.c::GenerateSEQC" ref="ga390dbcf4f7acce4593632f6789eee75e" args="(XMODEMC_BUF *pBuf, unsigned char bSeq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__xmodem__internal.html#ga390dbcf4f7acce4593632f6789eee75e">GenerateSEQC</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21">XMODEMC_BUF</a> *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>bSeq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generate a sequence number pair, place into XMODEMC_BUF (the CRC version) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pBuf</td><td>A pointer to an XMODEM_BUF structure </td></tr>
    <tr><td class="paramname">bSeq</td><td>An unsigned char, typically cast from an unsigned long 'block number'</td></tr>
  </table>
  </dd>
</dl>
<p>This function generates the sequence pair for the XMODEM packet. The 'block number' is initially assigned a value of '1', and increases by 1 for each successful packet. That value is 'truncated' to a single byte and assigned as a sequence number for the packet itself. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00411">411</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gadcf2538e319130745b37d1ba9d7f0875"></a><!-- doxytag: member="xmodem.c::GetXmodemBlock" ref="gadcf2538e319130745b37d1ba9d7f0875" args="(SERIAL_TYPE ser, char *pBuf, short cbSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="group__xmodem__internal.html#gadcf2538e319130745b37d1ba9d7f0875">GetXmodemBlock</a> </td>
          <td>(</td>
          <td class="paramtype">SERIAL_TYPE&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>cbSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get an XMODEM block from the serial device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>A 'SERIAL_TYPE' identifier for the serial connection </td></tr>
    <tr><td class="paramname">pBuf</td><td>A pointer to the buffer that receives the data </td></tr>
    <tr><td class="paramname">cbSize</td><td>The number of bytes/chars to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes/chars read, 0 if timed out (no data), &lt; 0 on error</dd></dl>
<p>Call this function to read data from the serial port, specifying the number of bytes to read. This function times out after no data transferred (silence) for a period of 'SILENCE_TIMEOUT' milliseconds. This allows spurious data transfers to continue as long as there is LESS THAN 'SILENCE_TIMEOUT' between bytes, and also allows VERY SLOW BAUD RATES (as needed). However, if the transfer takes longer than '10 times SILENCE_TIMEOUT', the function will return the total number of bytes that were received within that time.<br/>
 The default value of 5 seconds, extended to 50 seconds, allows a worst-case baud rate of about 20. This should not pose a problem. If it does, edit the code. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00435">435</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaa879f553c24787a6bb5627ca3a15cdaa"></a><!-- doxytag: member="xmodem.c::my_htons" ref="gaa879f553c24787a6bb5627ca3a15cdaa" args="(unsigned short sVal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned short <a class="el" href="group__xmodem__internal.html#gaa879f553c24787a6bb5627ca3a15cdaa">my_htons</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>sVal</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate checksum for XMODEM packet. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sVal</td><td>An unsigned short integer to be made 'high endian' by flipping bytes (as needed) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A (possibly) byte-flipped high-endian unsigned short integer</dd></dl>
<p>This function assumes low-endian for Arduino, and performs a universal operation for 'indeterminate' architectures. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00259">259</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga6bf0060dd155994fcfc657bbf8336fdb"></a><!-- doxytag: member="xmodem.c::MyMillis" ref="ga6bf0060dd155994fcfc657bbf8336fdb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="group__xmodem__internal.html#ga6bf0060dd155994fcfc657bbf8336fdb">MyMillis</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return internal 'milliseconds' value for timing purposes. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A calculated 'milliseconds' value as an unsigned long integer</dd></dl>
<p>This function returns the 'unsigned long' integer value for elapsed time based on the result of the 'gettimeofday()' API function. On 32-bit and Windows systems the value might wrap around, so you should be careful with your time comparisons (see the code _I_ wrote for the right way to do it). On 64-bit POSIX systems, this value will always increase.<br/>
 NOTE: Win32 defines this as a macro (see above) for the 'GetTickCount()' api, which returns a 32-bit value. POSIX x86 returns 32-bit, x64 returns 64-bit. YMMV. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00363">363</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga976e438c89c521a87410a249a822164a"></a><!-- doxytag: member="xmodem.c::ReceiveXmodem" ref="ga976e438c89c521a87410a249a822164a" args="(XMODEM *pX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xmodem__internal.html#ga976e438c89c521a87410a249a822164a">ReceiveXmodem</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *&#160;</td>
          <td class="paramname"><em>pX</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generic function to receive a file via XMODEM (CRC or Checksum) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to an 'XMODEM_BUF' with valid bCRC, ser, and file members </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero value on success, negative on error, positive on cancel</dd></dl>
<p>The calling function will need to poll for an SOH from the server using 'C' and 'NAK' characters (as appropriate) until an SOH is received. That value must be assigned to the 'buf' union (as appropriate), and the bCRC member assigned to non-zero if the server responded to 'C', or zero if it responded to 'NAK'. With the bCRC, ser, and file members correctly assigned, call THIS function to receive content via XMODEM and write it to 'file'.<br/>
 This function will return zero on success, a negative value on error, and a positive value if the transfer was canceled by the server. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00811">811</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga093eeee14b9f78b2bbc6b6fa1c1fd1dd"></a><!-- doxytag: member="xmodem.c::SendXmodem" ref="ga093eeee14b9f78b2bbc6b6fa1c1fd1dd" args="(XMODEM *pX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xmodem__internal.html#ga093eeee14b9f78b2bbc6b6fa1c1fd1dd">SendXmodem</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *&#160;</td>
          <td class="paramname"><em>pX</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generic function to send a file via XMODEM (CRC or Checksum) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to an 'XMODEM_BUF' with valid ser, and file members, and the polled 'NAK' value assigned to the cSOH member (first byte) within the 'buf' union. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero value on success, negative on error, positive on cancel</dd></dl>
<p>The calling function will need to poll for a 'C' or NAK from the client (as appropriate) and assign that character to the cSOH member in the 'buf' union (either xbuf or xcbuf since the 'cSOH' will always be the first byte). Then call this function to send content via XMODEM from 'file'.<br/>
 It is important to record the NAK character before calling this function since the 'C' or 'NAK' value will be used to determine whether to use CRC or CHECKSUM.<br/>
 This function will return zero on success, a negative value on error, and a positive value if the transfer was canceled by the receiver. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00994">994</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga52f24e88150bb39aa22f4d51686e818d"></a><!-- doxytag: member="xmodem.c::ValidateSEQ" ref="ga52f24e88150bb39aa22f4d51686e818d" args="(XMODEM_BUF *pX, unsigned char bSeq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="group__xmodem__internal.html#ga52f24e88150bb39aa22f4d51686e818d">ValidateSEQ</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#gaf865e242542aa82fda9745aa9ce716b6">XMODEM_BUF</a> *&#160;</td>
          <td class="paramname"><em>pX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>bSeq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Validate the sequence number of a received XMODEM block. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to an 'XMODEM_BUF' </td></tr>
    <tr><td class="paramname">bSeq</td><td>The expected sequence number (block &amp; 255) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero value on success, non-zero otherwise</dd></dl>
<p>Call this function to validate a packet's sequence number against the block number </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00775">775</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad8accfe76d5f9e74085c9d0139a720b8"></a><!-- doxytag: member="xmodem.c::ValidateSEQC" ref="gad8accfe76d5f9e74085c9d0139a720b8" args="(XMODEMC_BUF *pX, unsigned char bSeq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short <a class="el" href="group__xmodem__internal.html#gad8accfe76d5f9e74085c9d0139a720b8">ValidateSEQC</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga3a5d2704f8543319b57cb00893f80c21">XMODEMC_BUF</a> *&#160;</td>
          <td class="paramname"><em>pX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>bSeq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Validate the sequence number of a received XMODEM block (CRC version) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to an 'XMODEMC_BUF' </td></tr>
    <tr><td class="paramname">bSeq</td><td>The expected sequence number (block &amp; 255) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero value on success, non-zero otherwise</dd></dl>
<p>Call this function to validate a packet's sequence number against the block number </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00790">790</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac8bab540d9e07295a920b4b8bc9784ab"></a><!-- doxytag: member="xmodem.c::WriteXmodemBlock" ref="gac8bab540d9e07295a920b4b8bc9784ab" args="(SERIAL_TYPE ser, const void *pBuf, int cbSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xmodem__internal.html#gac8bab540d9e07295a920b4b8bc9784ab">WriteXmodemBlock</a> </td>
          <td>(</td>
          <td class="paramtype">SERIAL_TYPE&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cbSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Send an XMODEM block via the serial device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>A 'SERIAL_TYPE' identifier for the serial connection </td></tr>
    <tr><td class="paramname">pBuf</td><td>A pointer to the buffer that receives the data </td></tr>
    <tr><td class="paramname">cbSize</td><td>The number of bytes/chars to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes/chars written, &lt; 0 on error</dd></dl>
<p>Call this function to write data via the serial port, specifying the number of bytes to write. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00611">611</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga8dc519acd5fb00fcf44be051cc7fbcc2"></a><!-- doxytag: member="xmodem.c::WriteXmodemChar" ref="ga8dc519acd5fb00fcf44be051cc7fbcc2" args="(SERIAL_TYPE ser, unsigned char bVal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xmodem__internal.html#ga8dc519acd5fb00fcf44be051cc7fbcc2">WriteXmodemChar</a> </td>
          <td>(</td>
          <td class="paramtype">SERIAL_TYPE&#160;</td>
          <td class="paramname"><em>ser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>bVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a single character to the serial device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>A 'SERIAL_TYPE' identifier for the serial connection </td></tr>
    <tr><td class="paramname">bVal</td><td>The byte to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of bytes/chars written, or &lt; 0 on error</dd></dl>
<p>Call this function to write one byte of data to the serial port. Typically this is used to send things like an ACK or NAK byte. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00558">558</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gaebc2f5705f07625e4608eab408063c82"></a><!-- doxytag: member="xmodem.c::XModemFlushInput" ref="gaebc2f5705f07625e4608eab408063c82" args="(SERIAL_TYPE ser)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__xmodem__internal.html#gaebc2f5705f07625e4608eab408063c82">XModemFlushInput</a> </td>
          <td>(</td>
          <td class="paramtype">SERIAL_TYPE&#160;</td>
          <td class="paramname"><em>ser</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read all input from the serial port until there is 1 second of 'silence'. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ser</td><td>A 'SERIAL_TYPE' identifier for the serial connection</td></tr>
  </table>
  </dd>
</dl>
<p>Call this function to read ALL data from the serial port, until there is a period with no data (i.e. 'silence') for 1 second. At that point the function will return.<br/>
 Some operations require that any bad data be flushed out of the input to prevent synchronization problems. By using '1 second of silence' it forces re-synchronization to occur in one shot, with the possible exception of VERY noisy lines. The down side is that it may slow down transfers with a high data rate. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00666">666</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga8ed473aba0a89962bbb266986fc68b26"></a><!-- doxytag: member="xmodem.c::XmodemTerminate" ref="ga8ed473aba0a89962bbb266986fc68b26" args="(XMODEM *pX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__xmodem__internal.html#ga8ed473aba0a89962bbb266986fc68b26">XmodemTerminate</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *&#160;</td>
          <td class="paramname"><em>pX</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Terminate the XMODEM connection. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to the 'XMODEM' object identifying the transfer</td></tr>
  </table>
  </dd>
</dl>
<p>Call this function prior to ending the XMODEM transfer. Currently the only thing it does is flush the input. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00758">758</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="gad969e8b31a9388fd2b0c96c7c5d33923"></a><!-- doxytag: member="xmodem.c::XReceiveSub" ref="gad969e8b31a9388fd2b0c96c7c5d33923" args="(XMODEM *pX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xmodem__internal.html#gad969e8b31a9388fd2b0c96c7c5d33923">XReceiveSub</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *&#160;</td>
          <td class="paramname"><em>pX</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calling function for ReceiveXmodem. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to an 'XMODEM_BUF' with valid ser, and file members </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero value on success, negative on error, positive on cancel</dd></dl>
<p>This is a generic 'calling function' for ReceiveXmodem that checks for a response to 'C' and 'NAK' characters, and sets up the XMODEM transfer for either CRC or CHECKSUM mode.<br/>
 This function will return zero on success, a negative value on error, and a positive value if the transfer was canceled by the receiver. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l01232">1232</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga853105eb0f3d573cd53ee68b1bbe3f41"></a><!-- doxytag: member="xmodem.c::XSendSub" ref="ga853105eb0f3d573cd53ee68b1bbe3f41" args="(XMODEM *pX)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__xmodem__internal.html#ga853105eb0f3d573cd53ee68b1bbe3f41">XSendSub</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__xmodem__internal.html#ga194fbf91fe7e847dc6aa8b2d78b93341">XMODEM</a> *&#160;</td>
          <td class="paramname"><em>pX</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calling function for SendXmodem. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pX</td><td>A pointer to an 'XMODEM_BUF' with valid ser, and file members </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A zero value on success, negative on error, positive on cancel</dd></dl>
<p>This is a generic 'calling function' for SendXmodem that checks for polls by the receiver, and places the 'NAK' or 'C' character into the 'buf' member of the XMODEM structure so that SendXmodem can use the correct method, either CRC or CHECKSUM mode.<br/>
 This function will return zero on success, a negative value on error, and a positive value if the transfer was canceled by the receiver. </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l01304">1304</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Wed Sep 19 2012 02:53:13 for S.F.T. XMODEM Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
